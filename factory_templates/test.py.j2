"""
Tests for {{ module_name }}

Generated from: {{ spec_file }}
Validates spec compliance for all {{ agent_code }}-* requirements
"""

import pytest
from {{ module_path }} import {{ imports|join(', ') }}


{% for req_group in requirement_groups %}
class Test{{ req_group.class_name }}:
    """
    {{ req_group.description }}

    Validates: {{ spec_file }}#section-{{ req_group.section }}
    Requirements: {{ req_group.requirement_ids|join(', ') }}
    """

{% for test in req_group.tests %}
    def test_{{ test.name }}(self):
        """
        {{ test.description }}

        Validates: {{ spec_file }}#section-{{ req_group.section }}
        Requirement: {{ test.requirement_id }}
        """
        {{ test.code|indent(8) }}

{% endfor %}
{% endfor %}


{% if integration_tests %}
# ═══════════════════════════════════════════════════════════════════════════
# INTEGRATION TESTS
# ═══════════════════════════════════════════════════════════════════════════

class TestIntegration:
    """Integration tests for {{ module_name }}"""

{% for test in integration_tests %}
    def test_{{ test.name }}(self):
        """{{ test.description }}"""
        {{ test.code|indent(8) }}

{% endfor %}
{% endif %}
